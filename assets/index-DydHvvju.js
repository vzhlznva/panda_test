import{m as Z,o as n,c as a,a as o,d as E,t as s,b as g,e as $,u as r,f as l,n as T,_ as H,r as M,g as b,w as V,h as X,l as te,i as oe,j as ne,F as se,k as ae}from"./index-CYY26CSR.js";import{f as S,u as I,_ as ie,W as x,a as le,b as re,c as ce,d as de,G as he,N as ue,S as Y,C as _e,e as me,g as pe}from"./Header-BuITaYTr.js";const we={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ve(k,e){return n(),a("svg",we,e[0]||(e[0]=[o("g",{id:"ri:eye-line"},[o("path",{id:"Vector",d:"M12 3C17.392 3 21.878 6.88 22.819 12C21.879 17.12 17.392 21 12 21C6.60801 21 2.12201 17.12 1.18201 12C2.12201 6.88 6.60801 3 12 3ZM12 19C14.0396 18.9998 16.0188 18.3071 17.6135 17.0355C19.2081 15.7638 20.3239 13.9884 20.778 12C20.3226 10.0128 19.2065 8.23896 17.612 6.96854C16.0176 5.69813 14.0392 5.00635 12.0005 5.00635C9.96182 5.00635 7.98346 5.69813 6.38901 6.96854C4.79455 8.23896 3.67837 10.0128 3.22301 12C3.6771 13.9883 4.79268 15.7635 6.38715 17.0352C7.98162 18.3068 9.96054 18.9996 12 19ZM12 16.5C10.8065 16.5 9.66194 16.0259 8.81803 15.182C7.97411 14.3381 7.50001 13.1935 7.50001 12C7.50001 10.8065 7.97411 9.66193 8.81803 8.81802C9.66194 7.97411 10.8065 7.5 12 7.5C13.1935 7.5 14.3381 7.97411 15.182 8.81802C16.0259 9.66193 16.5 10.8065 16.5 12C16.5 13.1935 16.0259 14.3381 15.182 15.182C14.3381 16.0259 13.1935 16.5 12 16.5ZM12 14.5C12.663 14.5 13.2989 14.2366 13.7678 13.7678C14.2366 13.2989 14.5 12.663 14.5 12C14.5 11.337 14.2366 10.7011 13.7678 10.2322C13.2989 9.76339 12.663 9.5 12 9.5C11.337 9.5 10.7011 9.76339 10.2322 10.2322C9.7634 10.7011 9.50001 11.337 9.50001 12C9.50001 12.663 9.7634 13.2989 10.2322 13.7678C10.7011 14.2366 11.337 14.5 12 14.5Z",fill:"white"})],-1)]))}const ge=Z({name:"weather-visibility",render:ve}),ke={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ce(k,e){return n(),a("svg",ke,e[0]||(e[0]=[o("g",{id:"carbon:humidity"},[o("path",{id:"Vector",d:"M17.607 10.4947L12.6353 2.57775C12.5631 2.4765 12.4678 2.39397 12.3573 2.33702C12.2468 2.28007 12.1243 2.25036 12 2.25036C11.8757 2.25036 11.7532 2.28007 11.6427 2.33702C11.5322 2.39397 11.4369 2.4765 11.3647 2.57775L6.3705 10.533C5.67724 11.6522 5.2908 12.9341 5.25 14.25C5.25 16.0402 5.96116 17.7571 7.22703 19.023C8.4929 20.2888 10.2098 21 12 21C13.7902 21 15.5071 20.2888 16.773 19.023C18.0388 17.7571 18.75 16.0402 18.75 14.25C18.707 12.9193 18.3126 11.6237 17.607 10.4947ZM12 19.5C10.6082 19.498 9.27402 18.9443 8.28988 17.9601C7.30574 16.976 6.75198 15.6418 6.75 14.25C6.79063 13.2013 7.10561 12.1816 7.6635 11.2927L8.36475 10.1752L15.9202 17.7307C15.4294 18.2866 14.8261 18.7318 14.1503 19.037C13.4745 19.3421 12.7415 19.4994 12 19.5Z",fill:"white"})],-1)]))}const ye=Z({name:"weather-humidity",render:Ce}),fe={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function be(k,e){return n(),a("svg",fe,e[0]||(e[0]=[o("g",{id:"solar:wind-linear"},[o("g",{id:"Group"},[o("path",{id:"Vector",d:"M3 8H9.5C9.99445 8 10.4778 7.85338 10.8889 7.57867C11.3 7.30397 11.6205 6.91352 11.8097 6.45671C11.9989 5.99989 12.0484 5.49723 11.952 5.01228C11.8555 4.52732 11.6174 4.08187 11.2678 3.73223C10.9181 3.3826 10.4727 3.1445 9.98773 3.04804C9.50277 2.95157 9.00011 3.00108 8.54329 3.1903C8.08648 3.37952 7.69603 3.69995 7.42133 4.11108C7.14662 4.5222 7 5.00555 7 5.5V5.857M4 14H18.5C19.1922 14 19.8689 14.2053 20.4445 14.5899C21.0201 14.9744 21.4687 15.5211 21.7336 16.1606C21.9985 16.8002 22.0678 17.5039 21.9327 18.1828C21.7977 18.8618 21.4644 19.4854 20.9749 19.9749C20.4854 20.4644 19.8617 20.7977 19.1828 20.9328C18.5039 21.0678 17.8001 20.9985 17.1606 20.7336C16.5211 20.4687 15.9744 20.0201 15.5899 19.4445C15.2053 18.8689 15 18.1922 15 17.5V17",stroke:"white","stroke-width":"1.5","stroke-linecap":"round"}),o("path",{id:"Vector_2",d:"M2 11H18.5C19.1922 11 19.8689 10.7947 20.4445 10.4101C21.0201 10.0256 21.4687 9.47893 21.7336 8.83939C21.9985 8.19985 22.0678 7.49612 21.9327 6.81719C21.7977 6.13825 21.4644 5.51461 20.9749 5.02513C20.4854 4.53564 19.8617 4.2023 19.1828 4.06725C18.5039 3.9322 17.8001 4.00152 17.1606 4.26642C16.5211 4.53133 15.9744 4.97993 15.5899 5.55551C15.2053 6.13108 15 6.80777 15 7.5V8",stroke:"white","stroke-width":"1.5","stroke-linecap":"round"})])],-1)]))}const $e=Z({name:"weather-wind",render:be}),Me="/assets/sunrise-CDL8mM1k.png",Be="/assets/sunset-ACnaDvo_.png",Se={class:"highlights"},Ve={key:0,class:"highlights-body__item small"},Le={class:"head"},We={class:"data"},Te={key:0,class:"time"},Ze={key:1,class:"highlights-body__item small"},Ee={class:"head"},He={class:"data"},Ie={key:0,class:"time"},ze={key:2,class:"highlights-body__item small"},Ae={class:"head"},De={key:0,class:"data"},Ne={key:1,class:"time"},Fe={key:3,class:"highlights-body__item big"},Ge={class:"title"},Re={key:0,class:"time"},Ue={key:4,class:"highlights-body__item big"},je={class:"title"},Oe={key:0,class:"time"},qe={key:5},Je=E({__name:"Hightights",props:{block:{}},setup(k){return(e,h)=>{var i,C,t,d,u,w,m,y,p,f,B,L,W;const _=$e,v=ye,c=ge;return n(),a("div",Se,[o("h2",null,s(e.$t("weather.high")),1),o("div",{class:T(["highlights-body",{empty:!e.block.weather}])},[e.block.weather?(n(),a("div",Ve,[o("div",Le,[g(_),$(" "+s(e.$t("weather.wind")),1)]),o("div",We,[o("span",null,s((i=e.block.weather)==null?void 0:i.wind.speed),1),$(" "+s(e.$t("weather.ms")),1)]),e.block.weather?(n(),a("div",Te,s(r(S)((C=e.block.weather)==null?void 0:C.dt,(t=e.block.weather)==null?void 0:t.timezone)),1)):l("",!0)])):l("",!0),e.block.weather?(n(),a("div",Ze,[o("div",Ee,[g(v),$(" "+s(e.$t("weather.humidity")),1)]),o("div",He,[o("span",null,s((d=e.block.weather)==null?void 0:d.main.humidity),1),h[0]||(h[0]=$(" % "))]),e.block.weather?(n(),a("div",Ie,s(r(S)((u=e.block.weather)==null?void 0:u.dt,(w=e.block.weather)==null?void 0:w.timezone)),1)):l("",!0)])):l("",!0),e.block.weather?(n(),a("div",ze,[o("div",Ae,[g(c),$(" "+s(e.$t("weather.visibility")),1)]),e.block.weather?(n(),a("div",De,[o("span",null,s(Math.round(((m=e.block.weather)==null?void 0:m.visibility)/1e3)),1),$(" "+s(e.$t("weather.km")),1)])):l("",!0),e.block.weather?(n(),a("div",Ne,s(r(S)((y=e.block.weather)==null?void 0:y.dt,(p=e.block.weather)==null?void 0:p.timezone)),1)):l("",!0)])):l("",!0),e.block.weather?(n(),a("div",Fe,[h[1]||(h[1]=o("div",{class:"head"},[o("img",{src:Me,alt:"sunrise"})],-1)),o("div",Ge,s(e.$t("weather.sunrise")),1),e.block.weather?(n(),a("div",Re,s(r(S)((f=e.block.weather)==null?void 0:f.sys.sunrise,(B=e.block.weather)==null?void 0:B.timezone)),1)):l("",!0)])):l("",!0),e.block.weather?(n(),a("div",Ue,[h[2]||(h[2]=o("div",{class:"head"},[o("img",{src:Be,alt:"sunrise"})],-1)),o("div",je,s(e.$t("weather.sunset")),1),e.block.weather?(n(),a("div",Oe,s(r(S)((L=e.block.weather)==null?void 0:L.sys.sunset,(W=e.block.weather)==null?void 0:W.timezone)),1)):l("",!0)])):(n(),a("h2",qe,s(e.$t("no-city.no-data")),1))],2)])}}}),Ke=H(Je,[["__scopeId","data-v-085c33e3"]]),Pe={class:"delete-body"},Qe={class:"delete-body__actions"},Xe=E({__name:"DeleteModal",props:{index:{}},setup(k,{expose:e}){const h=k,_=M(null),v=I(),c=()=>{var i;v.deleteBlock(h.index),(i=_.value)==null||i.close()};return e({open:()=>{var i;return(i=_.value)==null?void 0:i.open()},close:()=>{var i;return(i=_.value)==null?void 0:i.close()}}),(i,C)=>{const t=ie;return n(),b(t,{ref_key:"modal",ref:_},{title:V(()=>[$(s(i.$t("delete.title")),1)]),default:V(()=>[o("div",Pe,[o("h2",null,s(i.$t("delete.text")),1),o("div",Qe,[o("button",{onClick:c},s(i.$t("delete.yes")),1),o("button",{class:"decline",onClick:C[0]||(C[0]=d=>{var u;return(u=_.value)==null?void 0:u.close()})},s(i.$t("delete.no")),1)])])]),_:1},512)}}}),Ye=H(Xe,[["__scopeId","data-v-9623a684"]]),xe={width:"1.2em",height:"1.2em",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"};function e1(k,e){return n(),a("svg",xe,e[0]||(e[0]=[o("g",{"data-name":"Layer 2"},[o("path",{d:"M20 29h-8a5 5 0 0 1-5-5V12a1 1 0 0 1 2 0v12a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V12a1 1 0 0 1 2 0v12a5 5 0 0 1-5 5ZM26 9H6a1 1 0 0 1 0-2h20a1 1 0 0 1 0 2Z",fill:"#5e5e5e",class:"fill-000000"}),o("path",{d:"M20 9h-8a1 1 0 0 1-1-1V6a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v2a1 1 0 0 1-1 1Zm-7-2h6V6a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1ZM14 23a1 1 0 0 1-1-1v-7a1 1 0 0 1 2 0v7a1 1 0 0 1-1 1ZM18 23a1 1 0 0 1-1-1v-7a1 1 0 0 1 2 0v7a1 1 0 0 1-1 1Z",fill:"#5e5e5e",class:"fill-000000"})],-1),o("path",{d:"M0 0h32v32H0z",fill:"none"},null,-1)]))}const t1=Z({name:"weather-delete",render:e1}),o1={key:0,class:"card-header__loc"},n1={class:"card-header__actions"},s1={key:1,class:"card-body"},a1={class:"card-body__left"},i1={class:"day"},l1={key:0},r1={class:"card-body__right"},c1=["src"],d1={key:1,class:"card-body__right-temp"},h1={key:2,class:"card-empty"},u1=E({__name:"LocationCard",props:{location:{},isEmpty:{type:Boolean},isCurrent:{type:Boolean},index:{},loading:{type:Boolean}},setup(k){const e=k,h=M(),_=M(),v=M(),c=new x,i=I(),C=(t,d)=>{t.fav?_.value.open():(i.favorites.length==5&&v.value.open(),i.addFavorite(t.location,d))};return X(()=>e.isCurrent,async()=>{var t,d,u,w,m,y;if(e.isCurrent&&!e.isEmpty)try{const p=await c.getWeather((d=(t=e.location)==null?void 0:t.location)==null?void 0:d.latitude,(w=(u=e.location)==null?void 0:u.location)==null?void 0:w.longitude);i.setCurrentCity({location:(m=e.location)==null?void 0:m.location,weather:p,fav:(y=e.location)==null?void 0:y.fav})}catch(p){console.error(p)}}),X(()=>te.value,async()=>{var t,d,u,w;if(!e.isEmpty)try{console.log("before");const m=await c.getWeather((d=(t=e.location)==null?void 0:t.location)==null?void 0:d.latitude,(w=(u=e.location)==null?void 0:u.location)==null?void 0:w.longitude);console.log("after"),i.replaceWeather(m,e.index)}catch(m){console.error(m)}}),(t,d)=>{var B,L,W,z,A,D,N,F,G,R,U,j,O,q,J,K,P,Q;const u=t1,w=oe,m=re,y=Ye,p=ce,f=de;return n(),a("div",{class:T(["card",{current:t.isCurrent}])},[t.loading?l("",!0):(n(),a("div",{key:0,class:T(["card-header",{empty:t.isEmpty}])},[t.isEmpty?l("",!0):(n(),a("div",o1,[o("p",null,s((L=(B=t.location)==null?void 0:B.location)==null?void 0:L.city)+", "+s((z=(W=t.location)==null?void 0:W.location)==null?void 0:z.country_code),1)])),o("div",n1,[g(u,{class:"card-header__fav",onClick:d[0]||(d[0]=ee=>h.value.open())}),t.isEmpty?l("",!0):(n(),b(w,{key:0,class:T(["card-header__fav",{fav:(A=t.location)==null?void 0:A.fav}]),onClick:d[1]||(d[1]=ee=>C(t.location,t.index))},null,8,["class"]))])],2)),!t.isEmpty&&!t.loading?(n(),a("div",s1,[o("div",a1,[o("p",i1,s(r(le)((N=(D=t.location)==null?void 0:D.weather)==null?void 0:N.dt,(G=(F=t.location)==null?void 0:F.weather)==null?void 0:G.timezone)),1),o("p",null,s(r(S)((U=(R=t.location)==null?void 0:R.weather)==null?void 0:U.dt,(O=(j=t.location)==null?void 0:j.weather)==null?void 0:O.timezone)),1),(q=t.location)!=null&&q.weather?(n(),a("h1",l1,s(Math.round(t.location.weather.main.temp))+"°C",1)):l("",!0)]),o("div",r1,[(J=t.location)!=null&&J.weather?(n(),a("img",{key:0,src:`/~/images/weather/${(K=t.location.weather)==null?void 0:K.weather[0].icon}.png`,alt:""},null,8,c1)):l("",!0),(P=t.location)!=null&&P.weather?(n(),a("div",d1,[o("h3",null,s(t.location.weather.weather[0].description),1),o("p",null,s(t.$t("weather.feels"))+" "+s(Math.round(t.location.weather.main.feels_like))+"°C",1)])):l("",!0)])])):t.loading?l("",!0):(n(),a("div",h1,s(t.$t("no-city.select")),1)),t.loading?(n(),b(m,{key:3})):l("",!0),g(y,{ref_key:"modal",ref:h,index:t.index},null,8,["index"]),t.isEmpty?l("",!0):(n(),b(p,{key:4,ref_key:"favModal",ref:_,index:t.index,block:(Q=t.location)==null?void 0:Q.location,favOnly:!1},null,8,["index","block"])),g(f,{ref_key:"limitModal",ref:v},null,512)],2)}}}),_1=H(u1,[["__scopeId","data-v-57225dfb"]]),m1={class:"main-block"},p1={class:"main-block__locations"},w1={class:"main-block__info"},v1={class:"main-block__chart"},g1=E({__name:"index",setup(k){const e={itemsToShow:5,snapAlign:"start",breakpoints:{200:{itemsToShow:1,snapAlign:"start"},300:{itemsToShow:1.8,snapAlign:"start"},500:{itemsToShow:2.5,snapAlign:"start"},800:{itemsToShow:3.5,snapAlign:"start"},1e3:{itemsToShow:4,snapAlign:"start"},1250:{itemsToShow:5,snapAlign:"start"}}},h=M(null),_=M(null),v=M(!1),c=I(),i=new x,C=new he;return ne(async()=>{if(c.blocks.length==0){v.value=!0;try{h.value=await C.getCurrentLocation(),_.value=await i.getWeather(h.value.latitude,h.value.longitude),c.addBlock({location:h.value,weather:_.value}),c.selectBlock(0)}catch(t){console.error(t)}finally{v.value=!1}}}),(t,d)=>{const u=me,w=_1,m=pe,y=Ke;return n(),a("div",m1,[g(u),o("div",p1,[g(r(_e),{itemsToShow:e.itemsToShow,snapAlign:"start",breakpoints:e.breakpoints},{addons:V(()=>[g(r(ue))]),default:V(()=>[(n(!0),a(se,null,ae(r(c).blocks,(p,f)=>(n(),b(r(Y),{key:f},{default:V(()=>[g(w,{location:p,isCurrent:r(c).currentIndex==f,isEmpty:p.location==null&&p.weather==null,index:f,onClick:B=>r(c).selectBlock(f),loading:v.value},null,8,["location","isCurrent","isEmpty","index","onClick","loading"])]),_:2},1024))),128)),r(c).blocks.length<5?(n(),b(r(Y),{key:r(c).blocks.length},{default:V(()=>[o("button",{class:"main-block__locations-add",onClick:d[0]||(d[0]=p=>r(c).addBlock({location:null,weather:null}))}," + ")]),_:1})):l("",!0)]),_:1},8,["itemsToShow","breakpoints"])]),o("div",w1,[o("div",v1,[r(c).currentBlock?(n(),b(m,{key:0,city:r(c).currentBlock.location},null,8,["city"])):l("",!0)]),r(c).currentBlock?(n(),b(y,{key:0,block:r(c).currentBlock},null,8,["block"])):l("",!0)])])}}}),y1=H(g1,[["__scopeId","data-v-bdd22aaf"]]);export{y1 as default};
